<!DOCTYPE html>
<html lang="de">
<head>
<!-- <meta charset="utf-8">-->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"></meta>
<!--  <meta http-equiv="X-UA-Compatible" content="IE=edge"> -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Die 3 Meta-Tags oben *müssen* zuerst im head stehen; jeglicher sonstiger head-Inhalt muss *nach* diesen Tags kommen -->
<title>Bootstrap-lichtmagnet.de</title>


<!-- Bootstrap -->
<link href="css/bootstrap.min.css" rel="stylesheet">

<!-- Unterstützung für Media Queries und HTML5-Elemente in IE8 über HTML5 shim und Respond.js -->
<!-- ACHTUNG: Respond.js funktioniert nicht, wenn du die Seite über file:// aufrufst -->
<!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
<script type="text/javascript"
	src="https://www.gstatic.com/charts/loader.js"></script>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="js/mqttws31.js" type="text/javascript"></script>
<script src="js/config.js" type="text/javascript"></script>
<script src="js/mqtt.js" type="text/javascript"></script>
<script src="js/websocket-in.js" type="text/javascript"></script>
<script src="js/middle.js" type="text/javascript"></script>

<script type="text/javascript">
            google.charts.load('current', {packages: ['corechart']});
            google.charts.setOnLoadCallback(drawChart);
            function drawChart() {
                var data = google.visualization.arrayToDataTable([
                    ['Diameter', 'Age'],
                    [8, 37], [4, 19.5], [11, 52], [4, 22], [3, 16.5], [6.5, 32.8], [14, 72]]);
                var options = {
                    title: 'Age of sugar maples vs. trunk diameter, in inches',
                    hAxis: {title: 'Diameter'},
                    vAxis: {title: 'Age'},
                    legend: 'right',
                    trendlines: {0: {type: 'exponential',
                            visibleInLegend: true,
                            color: 'purple',
                            lineWidth: 20,
                            opacity: 0.2,
                            showR2: true,
                        }}    // Draw a trendline for data series 0.
                };
                //var chart = new google.visualization.ScatterChart(document.getElementById('chart_div'));
                var chart = new google.visualization.ScatterChart($('#chart_div')[0]);
                chart.draw(data, options);
            }

            function drawChart2() {
                var data = google.visualization.arrayToDataTable([
                    ['Diameter', 'Age'],
                    [8, 47], [4, 19.5], [11, 52], [4, 22], [3, 16.5], [6.5, 32.8], [14, 72]]);
                var options = {
                    title: 'Age of sugar maples vs. trunk diameter, in inches',
                    hAxis: {title: 'Diameter'},
                    vAxis: {title: 'Age'},
                    legend: 'right',
                    trendlines: {0: {type: 'exponential',
                            visibleInLegend: true,
                            color: 'purple',
                            lineWidth: 20,
                            opacity: 0.2,
                            showR2: true,
                        }}    // Draw a trendline for data series 0.selkunde
                    
                };
                //var chart = new google.visualization.ScatterChart(document.getElementById('chart_div'));
                var chart = new google.visualization.ScatterChart($('#chart_div')[0]);
                chart.draw(data, options);
            }

            function drawChartjsonY(y) {
                var data = new google.visualization.DataTable();
                data.addColumn('number', 'X');
                data.addColumn('number', 'x');
                y.forEach(function (zeile, index) {
                    //console.log(zeile.X + '.+.' + zeile.x);
                    data.addRow([zeile.Y, zeile.y, ]);
                })

                var options = {
                    title: 'Höhe Sonnenstand zu Höhe Spiegelstand',
                    hAxis: {title: 'Sonne'},
                    vAxis: {title: 'Spiegel'},
                    legend: 'right',
                    trendlines: {0: {type: 'linear', //exponential',
                            visibleInLegend: true,
                            color: 'purple',
                            lineWidth: 20,
                            opacity: 0.2,
                            showR2: true,
                        }}    // Draw a trendline for data series 0.
                };
                //var chart = new google.visualization.ScatterChart(document.getElementById('chart_div'));
                var chart = new google.visualization.ScatterChart($('#chart_y')[0]);
                chart.draw(data, options);
            }

            function drawChartjsonX(x) {
                var data = new google.visualization.DataTable();
                data.addColumn('number', 'X');
                data.addColumn('number', 'x');
                x.forEach(function (zeile, index) {
                    //console.log(zeile.X + '.+.' + zeile.x);
                    data.addRow([zeile.X, zeile.x, ]);
                })

                var options = {
                    title: 'Horizontale Richtung Sonnen zu Spiegelstand',
                    hAxis: {title: 'Sonne'},
                    vAxis: {title: 'Spiegel'},
                    legend: 'right',
                    trendlines: {0: {type: 'linear', //exponential',
                            visibleInLegend: true,
                            color: 'purple',
                            lineWidth: 20,
                            opacity: 0.2,
                            showR2: true,
                        }}    // Draw a trendline for data series 0.
                };
                //var chart = new google.visualization.ScatterChart(document.getElementById('chart_div'));
                var chart = new google.visualization.ScatterChart($('#chart_x')[0]);
                chart.draw(data, options);
            }
            function drawChartjsonZ(z) {
                var data = new google.visualization.DataTable();
                data.addColumn('number', 'Y');
                data.addColumn('number', 'z');
                z.forEach(function (zeile, index) {
                    //console.log(zeile.X + '.+.' + zeile.x);
                    data.addRow([zeile.X, zeile.z, ]);
                })

                var options = {
                    title: 'Horizontale Richtung Sonnen zu Kippwinkel Spiegel',
                    hAxis: {title: 'Sonne'},
                    vAxis: {title: 'Spiegel'},
                    legend: 'right',
                    trendlines: {0: {type: 'linear', //exponential',
                            visibleInLegend: true,
                            color: 'purple',
                            lineWidth: 20,
                            opacity: 0.2,
                            showR2: true,
                        }}    // Draw a trendline for data series 0.
                };
                //var chart = new google.visualization.ScatterChart(document.getElementById('chart_div'));
                var chart = new google.visualization.ScatterChart($('#chart_z')[0]);

                chart.draw(data, options);
            }
            var gIndextoId = [];
            var delid = -1;
            function drawChartjsonA(a) {
                var data = new google.visualization.DataTable();
                data.addColumn('number', 'Sonne');
                data.addColumn('number', 'Spiegel');
                gIndextoId = [];
                a.forEach(function (zeile, index) {
                    //console.log(zeile.X + '.+.' + zeile.x);
                    data.addRow([zeile.Y, zeile.a, ]);

                    gIndextoId.push(zeile.id);
                })

                var options = {
                    title: 'Sonnenstand zu Lage Spiegel',
                    hAxis: {title: 'Sonne'},
                    vAxis: {title: 'Spiegel'},
                    legend: 'right',
                    trendlines: {0: {type: 'linear', //exponential',
                            visibleInLegend: true,
                            color: 'purple',
                            lineWidth: 20,
                            opacity: 0.2,
                            showR2: true,
                        }}    // Draw a trendline for data series 0.
                };
                //var chart = new google.visualization.ScatterChart(document.getElementById('chart_div'));
                var chart = new google.visualization.ScatterChart($('#chart_a')[0]);
                function selectHandler() {
                    var selectedItem = chart.getSelection()[0];
                    if (selectedItem) {
                        console.log(chart.getSelection().length);
                        console.log(selectedItem.row);
                        if (!(selectedItem.row == null)) {
                            var value = data.getValue(selectedItem.row, 0) + ', ' + data.getValue(selectedItem.row, 1);
                            //alert('The user selected ' + value);
                            console.log('row:', selectedItem.row, 'val:', value + ', id:' + gIndextoId[selectedItem.row]);
                            delid = gIndextoId[selectedItem.row];
                            $('#btndel').prop("disabled", false);
                        }
                    } else {
                        console.log('deselect');
                        $('#btndel').prop("disabled", true);
                        delid = -1;
                    }
                }
                google.visualization.events.addListener(chart, 'select', selectHandler);
                chart.draw(data, options);
            }

        </script>


</head>
<body>
	<div style='margin: 10px;'>
		<div id='xwsmessage'>fdsfdfds</div>
		<h1>leuchtemagnet.de</h1>
		
		<div id='message'></div>

		<div id="kunde" style="margin: 10px; float: left;">
			<label for="selkunde">Kunde</label> <select id="selkunde"
				class="selectpicker">
			</select>
		</div>
		<div id="spiegel" style="margin: 10px; float: left;">
			<label for="selspiegel">Spiegel</label> <select id="selspiegel"
				class="selectpicker">
			</select>
		</div>
		<div id="ziel" style="margin: 10px; float: left;">
			<label for="selziel">Ziel</label> <select id="selziel"
				class="selectpicker">

			</select>
		</div>


		<div style="clear: both;"></div>
		<div id='chart_x' style="height: 350px; width: 400px; float: left">
		</div>
		<div id='chart_z' style="height: 350px; width: 400px; float: left">
		</div>
		<div id='chart_y' style="height: 350px; width: 400px; float: left">
		</div>
		<div id='chart_a' style="height: 350px; width: 400px; float: left">
		</div>
		<button id='btndel' class="btn">Deaktivieren</button>
	</div>

	<!-- jQuery (wird für Bootstrap JavaScript-Plugins benötigt) -->

	<!-- Binde alle kompilierten Plugins zusammen ein (wie hier unten) oder such dir einzelne Dateien nach Bedarf aus -->
	<script src="js/bootstrap.min.js"></script>
	<script type="text/javascript">
            var b = false;
            $('#btn').on('click', function (e) {
                console.log('click');
                b = !b;
                if (b)
                    drawChart2();
                else
                    drawChart();
                console.log('clac');
            })
        </script>
</body>
</html>